<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Ghostwriter supports **all types of project files—including source code, documentation, project site content, and other relevant files**.

- **Write Clear and Concise Descriptions:**
	- Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghostwriter Overview</title>
</head>
<body>

<h1>Ghostwriter</h1>

<p>
  Ghostwriter is a command-line tool that orchestrates documentation and review updates across a project’s file tree.
  It scans directories for supported files, extracts embedded <code>@guidance:</code> directives, and composes a prompt
  for a configured GenAI provider.
</p>

<p>
  Processing is <strong>filesystem-based</strong>: Ghostwriter does not compile, run builds, or resolve dependencies.
  For multi-module layouts, modules are processed <strong>child-first</strong> so module-level guidance is applied before the
  parent project.
</p>

<h2>Architecture</h2>

<p>
  <img src="../images/class-diagram.png" alt="Ghostwriter class diagram" />
</p>

<p>
  The codebase is organized into two primary packages:
</p>

<ul>
  <li>
    <strong><code>org.machanism.machai.gw.processor</code></strong> — CLI entry point and the core scan → extract → compose →
    dispatch pipeline.
  </li>
  <li>
    <strong><code>org.machanism.machai.gw.reviewer</code></strong> — the reviewer SPI and format-specific implementations that
    extract guidance and normalize it into prompt fragments.
  </li>
</ul>

<h2><code>org.machanism.machai.gw.processor</code></h2>

<p>
  This package contains the user-facing CLI and the project traversal logic.
</p>

<ul>
  <li>
    <strong><code>Ghostwriter</code></strong> — application entry point. It loads configuration, parses CLI options (scan target,
    excludes, instructions, default guidance, threading, input logging), and invokes the processing pipeline.
  </li>
  <li>
    <strong><code>FileProcessor</code></strong> — scans the project tree, applies include/exclude rules, delegates parsing to
    reviewers, and dispatches composed prompts to the configured GenAI provider.
  </li>
</ul>

<p>
  For each processed file, Ghostwriter composes a prompt from:
</p>

<ol>
  <li>System instructions (optional; configured or provided via the CLI).</li>
  <li>Environment constraints (for example, OS-specific command syntax rules).</li>
  <li>
    Project context (project name/id, source/test/doc roots, module layout) plus extracted per-file guidance (or the
    default guidance when the file has none).
  </li>
</ol>

<h3>Scanning and scope</h3>

<ul>
  <li>
    <strong>Broad file coverage</strong>: the scan can include source code, documentation, project site content, and other
    relevant files supported by available reviewers.
  </li>
  <li>
    <strong>Configurable targets</strong>: the scan target may be a directory path or a matcher expression supported by
    <code>java.nio.file.FileSystems.getPathMatcher</code> (for example, <code>glob:**/*.java</code> or <code>regex:... </code>).
  </li>
  <li>
    <strong>Excludes</strong>: directories and paths can be excluded via configuration and/or CLI-provided rules.
  </li>
  <li>
    <strong>Input logging</strong>: composed prompt inputs can optionally be logged to a temporary directory for auditing and
    debugging.
  </li>
</ul>

<h2><code>org.machanism.machai.gw.reviewer</code></h2>

<p>
  The reviewer package defines the <code>Reviewer</code> service-provider interface (SPI) and a set of implementations
  responsible for extracting guidance from specific file formats. Reviewers are loaded via Java’s
  <code>ServiceLoader</code> and mapped to file extensions.
</p>

<p>
  Supported formats typically include Java source (including <code>package-info.java</code>), TypeScript, Python,
  HTML/XML, Markdown, PlantUML (<code>.puml</code>), and dedicated guidance files named <code>@guidance.txt</code>.
</p>

<h2>Typical usage</h2>

<pre>
java -jar gw.jar &lt;scanDir&gt; [options]
</pre>

<p>
  The <code>&lt;scanDir&gt;</code> argument may be a relative path or a matcher expression supported by
  <code>java.nio.file.FileSystems.getPathMatcher</code>.
</p>

<h2>See also</h2>

<ul>
  <li><a href="org/machanism/machai/gw/processor/package-summary.html">Processor package</a></li>
  <li><a href="org/machanism/machai/gw/reviewer/package-summary.html">Reviewer package</a></li>
</ul>

</body>
</html>

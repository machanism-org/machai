<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Ghostwriter supports **all types of project filesâ€”including source code, documentation, project site content, and other relevant files**.

- **Write Clear and Concise Descriptions:**
	- Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghostwriter Overview</title>
</head>
<body>

<header>
  <h1>Ghostwriter</h1>
  <p>
    Ghostwriter is a filesystem-first command-line utility that scans a project, extracts embedded
    <code>@guidance:</code> directives from supported file formats, and orchestrates GenAI-driven updates.
    The pipeline does <strong>not</strong> compile sources, execute builds, or resolve dependencies.
  </p>
</header>

<section>
  <h2>What Ghostwriter does</h2>
  <p>
    Ghostwriter turns in-repository guidance (for example, <code>@guidance:</code> blocks in source code,
    documentation, project site content, and other relevant project files) into provider-ready prompts.
    Each selected file is reviewed by a format-specific implementation that extracts and normalizes guidance,
    including project-relative path context.
  </p>
</section>

<section>
  <h2>High-level architecture</h2>

  <figure>
    <img src="../images/class-diagram.png" alt="Ghostwriter class diagram" />
    <figcaption>High-level class relationships in the Ghostwriter processing pipeline.</figcaption>
  </figure>

  <p>
    The implementation is organized into two cooperating packages:
  </p>

  <dl>
    <dt><strong><code>org.machanism.machai.gw.processor</code></strong></dt>
    <dd>
      Command-line entry point and processing pipeline that performs filesystem traversal, selects reviewers,
      composes prompts, and invokes a configured GenAI provider.
      Key behaviors include <strong>child-first module processing</strong> and a deliberate
      <strong>no dependency resolution</strong> model.
    </dd>

    <dt><strong><code>org.machanism.machai.gw.reviewer</code></strong></dt>
    <dd>
      Reviewer service-provider interface (SPI) and format-specific implementations that detect and extract
      <code>@guidance</code> directives from supported file formats (for example Java, Markdown, HTML/XML,
      TypeScript, Python, PlantUML, and plain text).
    </dd>
  </dl>
</section>

<section>
  <h2>Processing model</h2>

  <h3>Filesystem scanning</h3>
  <p>
    Ghostwriter operates directly on files and directories. It does not build the project; guidance extraction
    and prompt composition are driven entirely by file content and the declared project layout.
  </p>

  <h3>Module traversal</h3>
  <p>
    In multi-module layouts, Ghostwriter processes modules before their parent directory (child-first).
    This ensures module-local guidance is collected and applied prior to any parent-level aggregation.
  </p>

  <h3>Scan targets and matchers</h3>
  <p>
    A scan target can be a directory path (typically relative to the project root) or a matcher expression
    supported by <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
  <ul>
    <li>Directory path (for example, <code>src/main</code>)</li>
    <li><code>glob:</code> patterns (for example, <code>glob:**/*.java</code>)</li>
    <li><code>regex:</code> patterns (for example, <code>regex:^.*/[^/]+\\.java$</code>)</li>
  </ul>

  <h3>Guidance extraction and orchestration</h3>
  <p>
    For each selected file, Ghostwriter selects an appropriate reviewer based on the file format,
    extracts embedded guidance, and combines the results with project context to build a provider-ready prompt.
    The resulting prompt is then submitted to the configured GenAI provider.
  </p>
</section>

<section>
  <h2>Package overview</h2>

  <h3><code>org.machanism.machai.gw.processor</code></h3>
  <p>
    Command-line project scanning, guidance extraction, and prompt orchestration.
    This package contains Ghostwriter's CLI entry point and the processing pipeline responsible for:
  </p>
  <ul>
    <li>
      <strong>Filesystem traversal</strong>: walking the project tree, supporting include matchers
      (<code>glob:</code>/<code>regex:</code>) and applying exclusion rules.
    </li>
    <li>
      <strong>Provider orchestration</strong>: creating/configuring the GenAI provider, applying any configured
      function tools, and optionally logging composed prompt inputs for traceability.
    </li>
    <li>
      <strong>Guidance processing</strong>: selecting reviewers by file extension, extracting embedded
      <code>@guidance:</code> directives, composing prompts, and dispatching them to the provider.
    </li>
  </ul>

  <h3><code>org.machanism.machai.gw.reviewer</code></h3>
  <p>
    File-format aware scanners that extract embedded <code>@guidance</code> instructions from project files.
    Reviewers implement a small SPI and encapsulate comment parsing and normalization per file format.
  </p>
</section>

<section>
  <h2>Typical usage</h2>
  <pre><code>java -jar gw.jar &lt;scanTarget&gt; [options]</code></pre>
  <p>
    The <code>&lt;scanTarget&gt;</code> argument can be a relative directory path or a matcher expression supported by
    <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
</section>

<section>
  <h2>See also</h2>
  <ul>
    <li><a href="org/machanism/machai/gw/processor/package-summary.html">Processor package</a></li>
    <li><a href="org/machanism/machai/gw/reviewer/package-summary.html">Reviewer package</a></li>
  </ul>
</section>

</body>
</html>

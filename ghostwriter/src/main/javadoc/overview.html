<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Ghostwriter supports **all types of project files—including source code, documentation, project site content, and other relevant files**.

- **Write Clear and Concise Descriptions:**
	- Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghostwriter Overview</title>
</head>
<body>

<header>
  <h1>Ghostwriter</h1>

  <p>
    Ghostwriter is a command-line utility that scans a project’s filesystem, extracts embedded
    <code>@guidance:</code> directives from supported file formats, and orchestrates GenAI-driven updates.
  </p>

  <p>
    The tool is intentionally <strong>filesystem-based</strong>: it does not compile sources, execute builds,
    or resolve dependencies. For multi-module layouts, modules are processed <strong>child-first</strong> so
    module guidance is applied before the parent project.
  </p>
</header>

<section>
  <h2>Architecture</h2>

  <figure>
    <img src="../images/class-diagram.png" alt="Ghostwriter class diagram" />
    <figcaption>High-level class relationships in the Ghostwriter processing pipeline.</figcaption>
  </figure>

  <p>
    Ghostwriter is organized into two cooperating packages:
  </p>

  <dl>
    <dt><strong><code>org.machanism.machai.gw.processor</code></strong></dt>
    <dd>
      Command-line entry point and the scan → extract → compose → dispatch pipeline. This package traverses the
      project tree (including child-first module traversal), applies include/exclude rules, composes prompts,
      and invokes a configured GenAI provider.
    </dd>

    <dt><strong><code>org.machanism.machai.gw.reviewer</code></strong></dt>
    <dd>
      Reviewer SPI and format-specific implementations used to extract and normalize guidance from project
      files. Reviewers are typically loaded via Java’s <code>ServiceLoader</code> and mapped to file
      extensions.
    </dd>
  </dl>
</section>

<section>
  <h2><code>org.machanism.machai.gw.processor</code></h2>

  <p>
    The processor package contains the user-facing CLI and the processing pipeline that turns project files
    into GenAI prompt runs.
  </p>

  <ul>
    <li>
      <strong><code>Ghostwriter</code></strong> — CLI entry point. Loads configuration, parses options, and invokes the
      processing pipeline.
    </li>
    <li>
      <strong><code>GuidanceProcessor</code></strong> — Walks the filesystem (including child-first modules), delegates
      file parsing to reviewers, assembles prompts, and dispatches them to the selected provider.
    </li>
    <li>
      <strong><code>FileProcessor</code></strong> — File-discovery and per-file processing support used by the pipeline.
    </li>
  </ul>

  <h3>Key behaviors</h3>
  <ul>
    <li><strong>Child-first module traversal</strong>: modules are processed before their parent directory.</li>
    <li><strong>No dependency resolution</strong>: projects are not built and dependencies are not resolved.</li>
    <li>
      <strong>Configurable scan scope</strong>: the scan target may be a directory path or a matcher expression
      supported by <code>java.nio.file.FileSystems.getPathMatcher</code> (for example, <code>glob:**/*.java</code>
      or <code>regex:...</code>).
    </li>
    <li>
      <strong>Optional auditing</strong>: composed prompt inputs may be logged for debugging and traceability.
    </li>
  </ul>

  <h3>Prompt composition (high-level)</h3>
  <p>
    For each processed file, Ghostwriter composes a prompt using:
  </p>
  <ol>
    <li>System instructions (configured or supplied via the CLI).</li>
    <li>Environment constraints (for example, OS-specific command syntax rules).</li>
    <li>Project context (layout, source/test/doc roots, modules).</li>
    <li>Per-file extracted guidance (or default guidance if the file contains none).</li>
  </ol>
</section>

<section>
  <h2><code>org.machanism.machai.gw.reviewer</code></h2>

  <p>
    The reviewer package defines the <code>Reviewer</code> service-provider interface (SPI) and a set of
    implementations responsible for extracting embedded <code>@guidance</code> instructions.
  </p>

  <p>
    Reviewers understand a format’s comment conventions and return a normalized guidance fragment for
    downstream prompt composition.
  </p>

  <h3>Included reviewers</h3>
  <ul>
    <li>Java source (<code>.java</code>)</li>
    <li>Markdown (<code>.md</code>)</li>
    <li>HTML (<code>.html</code>)</li>
    <li>TypeScript (<code>.ts</code>)</li>
    <li>Python (<code>.py</code>)</li>
    <li>PlantUML (<code>.puml</code>)</li>
    <li>Plain text guidance (<code>.txt</code>)</li>
  </ul>
</section>

<section>
  <h2>Typical usage</h2>

  <pre><code>java -jar gw.jar &lt;scanDir&gt; [options]</code></pre>

  <p>
    The <code>&lt;scanDir&gt;</code> argument can be a relative directory path or a matcher expression supported by
    <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
</section>

<section>
  <h2>See also</h2>
  <ul>
    <li><a href="org/machanism/machai/gw/processor/package-summary.html">Processor package</a></li>
    <li><a href="org/machanism/machai/gw/reviewer/package-summary.html">Reviewer package</a></li>
  </ul>
</section>

</body>
</html>

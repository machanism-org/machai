<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Use information from `pom.xml` for get information about PROJECT_NAME: `project.name`, PROJECT_DESCRIPTION: `project.description`.
[PROJECT_NAME] supports all types of project filesâ€”including source code, documentation, project site content, and other relevant files.

- **Write Clear and Concise Descriptions:**
    - Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.

- **Automatic Fixes for Javadoc Build Issues:**
    - If Javadoc build fails due to invalid @throws tags or missing required Javadoc, 
       automatically correct these issues in the generated `overview.html` content (e.g., omit invalid tags, add missing descriptions as needed).
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghostwriter Overview</title>
</head>
<body>

<header>
  <h1>Ghostwriter</h1>
  <p>
    Ghostwriter is a filesystem-first command-line utility that scans a project, extracts embedded
    <code>@guidance:</code> directives from supported file formats, and orchestrates GenAI-driven updates.
    It operates purely on files (source code, documentation, project site content, and other relevant files)
    and does not build projects, compile sources, or resolve dependencies as part of processing.
  </p>
</header>

<section>
  <h2>Scope and goals</h2>
  <p>
    Ghostwriter turns in-repository guidance into provider-ready prompts.
    Guidance is embedded directly inside project files and is extracted by file-format specific reviewers.
    Extracted guidance, together with project context (such as relative paths and file content), is combined
    into prompts that can be submitted to a configured GenAI provider.
  </p>
</section>

<section>
  <h2>High-level architecture</h2>

  <figure>
    <img src="../images/class-diagram.png" alt="Ghostwriter class diagram" />
    <figcaption>High-level class relationships in the Ghostwriter processing pipeline.</figcaption>
  </figure>

  <p>
    The implementation is organized into a processing pipeline and a set of file-format reviewers:
  </p>

  <dl>
    <dt><strong><code>org.machanism.machai.gw.processor</code></strong></dt>
    <dd>
      Command-line entry point and processing pipeline.
      Responsibilities include filesystem traversal, scan-target selection (directory paths and
      <code>glob:</code>/<code>regex:</code> matchers), reviewer selection, prompt composition, and invoking a
      configured GenAI provider.
      The processing model is explicitly <strong>child-first</strong> for multi-module project layouts and
      intentionally performs <strong>no dependency resolution</strong>.
    </dd>

    <dt><strong><code>org.machanism.machai.gw.reviewer</code></strong></dt>
    <dd>
      Reviewer service-provider interface (SPI) and format-specific implementations that detect and extract
      embedded <code>@guidance</code> directives using the comment conventions of each supported file type (for
      example Java, Markdown, HTML/XML, TypeScript, Python, PlantUML, and plain text).
      Reviewers emit normalized prompt fragments for consumption by the processing pipeline.
    </dd>
  </dl>
</section>

<section>
  <h2>Processing model</h2>

  <h3>Filesystem scanning</h3>
  <p>
    Ghostwriter operates directly on directories and files.
    Guidance extraction and prompt composition are driven entirely by file content and the declared project layout.
  </p>

  <h3>Module traversal (child-first)</h3>
  <p>
    In multi-module layouts, Ghostwriter processes modules before their parent directory (child-first).
    This ensures module-local guidance is collected and applied prior to any parent-level aggregation.
  </p>

  <h3>Scan targets and matchers</h3>
  <p>
    A scan target can be a directory path (typically relative to the project root) or a matcher expression
    supported by <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
  <ul>
    <li>Directory path (for example, <code>src/main</code>)</li>
    <li><code>glob:</code> patterns (for example, <code>glob:**/*.java</code>)</li>
    <li><code>regex:</code> patterns (for example, <code>regex:^.*/[^/]+\\.java$</code>)</li>
  </ul>

  <h3>Guidance extraction and orchestration</h3>
  <p>
    For each selected file, Ghostwriter chooses an appropriate reviewer based on the file format, extracts any
    embedded guidance, and combines it with the project context to build a provider-ready prompt.
    The resulting prompt is then submitted to the configured GenAI provider for execution.
  </p>
</section>

<section>
  <h2>Packages</h2>

  <h3><code>org.machanism.machai.gw.processor</code></h3>
  <p>
    Command-line project scanning, guidance extraction, and prompt orchestration.
    This package contains the CLI entry point and the processing pipeline responsible for:
  </p>
  <ul>
    <li>
      <strong>Filesystem traversal</strong>: walking the project tree, supporting include matchers
      (<code>glob:</code>/<code>regex:</code>) and applying exclusion rules.
    </li>
    <li>
      <strong>Provider orchestration</strong>: creating/configuring the GenAI provider, applying any configured
      function tools, and optionally logging composed inputs for traceability.
    </li>
    <li>
      <strong>Guidance processing</strong>: selecting reviewers by file extension, extracting embedded
      <code>@guidance:</code> directives, composing prompts, and dispatching them to the provider.
    </li>
  </ul>
  <p>
    Key behaviors include <strong>child-first module processing</strong> for multi-module projects,
    <strong>no dependency resolution</strong> (the project is not built and dependencies are not resolved during
    scanning), and <strong>broad file coverage</strong> across source, documentation, project site content, and other
    relevant project files.
  </p>

  <h3><code>org.machanism.machai.gw.reviewer</code></h3>
  <p>
    File-format-aware scanners that extract embedded <code>@guidance</code> instructions from project files.
    Reviewers implement a small SPI and encapsulate comment parsing and normalization per file format.
    The normalized guidance output is designed to be consumed by the Ghostwriter processing pipeline.
  </p>
</section>

<section>
  <h2>Typical usage</h2>
  <pre><code>java -jar gw.jar &lt;scanTarget&gt; [options]</code></pre>
  <p>
    The <code>&lt;scanTarget&gt;</code> argument can be a relative directory path or a matcher expression supported by
    <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
</section>

<section>
  <h2>See also</h2>
  <ul>
    <li><a href="org/machanism/machai/gw/processor/package-summary.html">Processor package</a></li>
    <li><a href="org/machanism/machai/gw/reviewer/package-summary.html">Reviewer package</a></li>
  </ul>
</section>

</body>
</html>

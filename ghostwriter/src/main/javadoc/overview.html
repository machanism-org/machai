<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Use information from `pom.xml` for get information about PROJECT_NAME: `project.name`, PROJECT_DESCRIPTION: `project.description`.
[PROJECT_NAME] supports all types of project files—including source code, documentation, project site content, and other relevant files.

- **Write Clear and Concise Descriptions:**
    - Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.

- **Automatic Fixes for Javadoc Build Issues:**
    - If Javadoc build fails due to invalid @throws tags or missing required Javadoc, 
       automatically correct these issues in the generated `overview.html` content (e.g., omit invalid tags, add missing descriptions as needed).
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ghostwriter Overview</title>
</head>
<body>

<header>
  <h1>Ghostwriter</h1>
  <p>
    Ghostwriter is an advanced documentation engine that automatically scans, analyzes, and assembles project
    documentation using embedded guidance tags and AI-powered synthesis.
    It operates as a filesystem-first command-line utility and supports all types of project files—including
    source code, documentation, project site content, and other relevant files.
  </p>
</header>

<section>
  <h2>Concepts</h2>
  <dl>
    <dt><strong>Guidance</strong></dt>
    <dd>
      A <code>@guidance:</code> block embedded in a file comment. Guidance is treated as mandatory, file-scoped
      instructions that can be extracted and turned into provider-ready prompts.
    </dd>

    <dt><strong>Reviewer</strong></dt>
    <dd>
      A file-format-aware parser that knows how to locate and extract <code>@guidance:</code> blocks using the
      comment conventions of a specific format (for example Java, Markdown, HTML/XML, TypeScript, Python,
      PlantUML, and plain text).
    </dd>

    <dt><strong>Processor</strong></dt>
    <dd>
      The pipeline that traverses the filesystem, selects a reviewer for each file, composes prompts from the
      extracted guidance and project context, and dispatches the prompts to a configured GenAI provider.
    </dd>
  </dl>
</section>

<section>
  <h2>High-level architecture</h2>

  <figure>
    <img src="../images/class-diagram.png" alt="Ghostwriter class diagram" />
    <figcaption>High-level class relationships in the Ghostwriter processing pipeline.</figcaption>
  </figure>

  <p>
    Ghostwriter is organized around a filesystem processing pipeline and a set of file-format reviewers.
    The primary packages are:
  </p>

  <dl>
    <dt><strong><code>org.machanism.machai.gw.processor</code></strong></dt>
    <dd>
      Command-line entry point and processing pipeline. Responsibilities include filesystem traversal,
      scan-target selection (directory paths and <code>glob:</code>/<code>regex:</code> matchers), reviewer selection,
      prompt composition, and invoking a configured GenAI provider. Projects are processed using a
      <strong>child-first</strong> approach for multi-module layouts.
    </dd>

    <dt><strong><code>org.machanism.machai.gw.reviewer</code></strong></dt>
    <dd>
      Reviewer service-provider interface (SPI) and format-specific implementations that detect and extract
      embedded <code>@guidance</code> directives. Reviewers emit normalized prompt fragments for consumption by
      the processing pipeline.
    </dd>
  </dl>
</section>

<section>
  <h2>Processing model</h2>

  <h3>Filesystem scanning</h3>
  <p>
    Ghostwriter operates directly on directories and files. Guidance extraction and prompt composition are
    driven by file content and the declared project layout.
  </p>

  <h3>Module traversal (child-first)</h3>
  <p>
    In multi-module layouts, Ghostwriter processes module directories before their parent directory
    (child-first). This ensures module-local guidance is handled prior to any parent-level aggregation.
  </p>

  <h3>Scan targets and matchers</h3>
  <p>
    A scan target can be a directory path (typically relative to the project root) or a matcher expression
    supported by <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
  <ul>
    <li>Directory path (for example, <code>src/main</code>)</li>
    <li><code>glob:</code> patterns (for example, <code>glob:**/*.java</code>)</li>
    <li><code>regex:</code> patterns (for example, <code>regex:^.*/[^/]+\\.java$</code>)</li>
  </ul>

  <h3>Guidance extraction and orchestration</h3>
  <p>
    For each selected file, Ghostwriter chooses an appropriate reviewer based on the file format, extracts any
    embedded guidance blocks, and combines them with project context (such as the project-relative file path and
    relevant file content) to build a provider-ready prompt.
  </p>
  <p>
    Prompts are then submitted to the configured GenAI provider for execution.
  </p>

  <h3>Non-goals and constraints</h3>
  <ul>
    <li>
      <strong>No build step</strong>: processing is traversal-only; projects are not compiled and dependencies are
      not resolved.
    </li>
    <li>
      <strong>Format-specific parsing</strong>: guidance extraction depends on reviewer support for the file type.
    </li>
  </ul>
</section>

<section>
  <h2>Package overview</h2>

  <h3><code>org.machanism.machai.gw.processor</code></h3>
  <p>
    Implements Ghostwriters command-line processing pipeline. Key responsibilities include:
  </p>
  <ul>
    <li>
      <strong>CLI entry point</strong>: parse options, interpret scan targets, and bootstrap processing.
    </li>
    <li>
      <strong>Traversal and selection</strong>: walk the filesystem, apply include/exclude rules, and process
      multi-module layouts using a child-first order.
    </li>
    <li>
      <strong>Prompt orchestration</strong>: select reviewers per file type, compose prompts from extracted
      guidance and context, and invoke a GenAI provider.
    </li>
  </ul>

  <h3><code>org.machanism.machai.gw.reviewer</code></h3>
  <p>
    Defines the reviewer SPI and implementations that understand how to extract <code>@guidance</code> blocks
    from specific file formats.
  </p>
  <p>
    Reviewers typically:
  </p>
  <ul>
    <li>detect whether a file is supported,</li>
    <li>extract one or more guidance blocks using format-specific comment rules, and</li>
    <li>return normalized prompt fragments for the processor pipeline to consume.</li>
  </ul>
</section>

<section>
  <h2>Typical usage</h2>
  <pre><code>java -jar gw.jar &lt;scanTarget&gt; [options]</code></pre>
  <p>
    The <code>&lt;scanTarget&gt;</code> argument can be a relative directory path or a matcher expression supported by
    <code>java.nio.file.FileSystems.getPathMatcher</code>.
  </p>
</section>

<section>
  <h2>See also</h2>
  <ul>
    <li><a href="org/machanism/machai/gw/processor/package-summary.html">Processor package</a></li>
    <li><a href="org/machanism/machai/gw/reviewer/package-summary.html">Reviewer package</a></li>
  </ul>
</section>

</body>
</html>

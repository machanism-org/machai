<!-- 
@guidance:
**IMPORTANT: GENERATE CONTENT FOR THIS FILE: `overview.html` ACCORDING TO THE BEST PRACTICES AND RULES BELOW.**

Ghostwriter supports **all types of project filesâ€”including source code, documentation, project site content, and other relevant files**.

- **Write Clear and Concise Descriptions:**
	- Follow best practices for creating a package overview.
    - Provide meaningful summaries that clearly explain the purpose, behavior, and usage of each element.
    - Avoid vague or generic statements; be specific about functionality and intent.
    - Aggregate information from `package-info.java` files from source folders.
    - Use the class diagram located at `../images/class-diagram.png`.
    - Create a detailed package-level overview that describes its overall purpose, structure, and usage.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GW Maven Plugin API Overview</title>
</head>
<body>

<h1>GW Maven Plugin</h1>

<p>
  GW Maven Plugin is a Maven plugin that provides goals (Mojos) and shared infrastructure for running the
  MachAI Ghostwriter guided workflow (GW) document-processing pipeline as part of a Maven build. The plugin scans
  a project content tree (commonly <code>src/site</code>) for files containing <code>@guidance</code> directives and
  delegates processing to Ghostwriters file-processing pipeline.
</p>

<h2>Packages</h2>

<p>
  The primary public API surface is located in:
</p>

<ul>
  <li>
    <code>org.machanism.machai.gw.maven</code>  Maven goals and shared execution infrastructure.
  </li>
</ul>

<h2>Architecture and main components</h2>

<p>
  The plugin is organized around Maven goals that share a common execution flow:
  determine a scan root, configure a Ghostwriter <code>FileProcessor</code>, apply include/exclude rules,
  and invoke guided processing.
</p>

<ul>
  <li>
    <strong>Goals (Mojos)</strong>
    <ul>
      <li>
        <strong><code>GW</code> (<code>gw:gw</code>)</strong>: Aggregator-style goal that can run without a <code>pom.xml</code>.
        It processes modules in reverse order (sub-modules first, then parent modules), matching the ordering used by
        the Ghostwriter CLI.
      </li>
      <li>
        <strong><code>ReactorGW</code> (<code>gw:reactor</code>)</strong>: Processes projects in standard Maven reactor dependency order
        and can optionally defer processing of the execution-root project.
      </li>
      <li>
        <strong><code>Clean</code> (<code>gw:clean</code>)</strong>: Deletes temporary artifacts created by GW processing (typically bound
        to Mavens <code>clean</code> lifecycle).
      </li>
    </ul>
  </li>
  <li>
    <strong>Shared infrastructure</strong>
    <ul>
      <li>
        <strong><code>AbstractGWGoal</code></strong>: Base class defining shared parameters (for example: instruction locations,
        default guidance, scan directory, excludes, and optional credentials lookup) and the common scan/execute flow.
      </li>
    </ul>
  </li>
</ul>

<h2>Input scanning and processing</h2>

<p>
  At runtime, each goal determines a scan roottypically Mavens execution root directorybut it can be overridden
  via <code>-Dgw.scanDir</code>. The goal then configures Ghostwriters processing pipeline and scans for files that include
  guided instructions (for example, embedded <code>@guidance</code> directives). This design supports guided updates across
  many project artifact types, including source code, documentation, and project site content.
</p>

<h2>Credentials and configuration</h2>

<p>
  In addition to standard Maven plugin configuration, GenAI credentials can optionally be sourced from
  <code>~/.m2/settings.xml</code> by providing <code>-Dgw.genai.serverId=&lt;serverId&gt;</code>. When configured, the plugin reads the
  matching <code>&lt;server&gt;</code> credentials and forwards them to the Ghostwriter workflow.
</p>

<h2>Class diagram</h2>

<p>
  The following diagram summarizes the main goal types and shared infrastructure.
</p>

<p>
  <img src="../images/class-diagram.png" alt="Class diagram for GW Maven Plugin" />
</p>

<h2>Common usage</h2>

<p>
  Run guided processing for the current project:
</p>

<pre>
mvn gw:gw
</pre>

<p>
  Run reactor-ordered processing in a multi-module build:
</p>

<pre>
mvn gw:reactor
</pre>

<p>
  Override the scan root directory (Windows example):
</p>

<pre>
mvn gw:reactor -Dgw.scanDir=src\site
</pre>

</body>
</html>

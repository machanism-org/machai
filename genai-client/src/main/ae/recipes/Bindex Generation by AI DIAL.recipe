<Recipe name="Bindex Generation by AI DIAL">
	<Extern class="Web" timeout="10s">
		<ElementNotExists id="theme-main" timeout="1s">
			<Var name="AI DIAL URL" init="console" /> 
			<Page url="$var{AI DIAL URL}" /> 
			<Click xpath="//*[@id='__next']/div/div[2]/div/div[2]/button" /> 
			<Var name="email" init="console" /> 
			<Text value="$var{email}" name="loginfmt" /> 
			<Click id="idSIButton9" /> 
			<Wait delay="2s" /> 
			<WhileRun message="Please authorize on the web page manually.">
				<Text value="Hi$var{\n}" id="chat-text-field" timeout="5m" /> 
			</WhileRun> 
		</ElementNotExists> 
		<Var name="Project Directory" init="console" /> 
		<Listdir name="Inputs Files" path="$var{Project Directory}" filter="inputs.txt" /> 
		<Out name="Inputs Files" level="debug" /> 
		<Loop name="path" source="Inputs Files">
			<Var name="path" end="\.machai\inputs.txt" /> 
			<Remove name="existedBindex" /> 
			<Load name="existedBindex" file="$var{path}\bindex.json" exception="java.io.FileNotFoundException" /> 
			<If isNull="existedBindex">
				<Remove name="inputs" /> 
				<Load name="inputs" file="$var{path}\.bindex\inputs.txt" exception="java.io.FileNotFoundException" /> 
				<Out name="inputs" /> 
				<If isNotNull="inputs">
					<Clipboard name="inputs" /> 
					<Click xpath="//*[@id='chat']/div[2]/div/div/div/div[2]/div[2]/div/div[1]/div/div/div/div/div[2]/div[2]/span[2]/button" /> 
					<Click xpath="//*[@id='chat']/div[2]/div/div/div/div[2]/div[2]/div/div[1]/div/div/div/div/div[2]/div/div[1]" /> 
					<Text value="$var{\CONTROL+v}" id="chat-text-field" /> 
					<Wait delay="1s" /> 
					<Click xpath="//*[@id='chat']/div[2]/div/div/div/div[2]/div[2]/div/div[1]/div/div/div/div/div[2]/div/div[2]/div[2]/button[2]" /> 
					<Wait delay="1s" /> 
					<Click xpath="//*[@id='chat']/div[2]/div/div/div/div[3]/div[2]/div/div[2]/button" exception="ignore" timeout="2s" /> 
					<ElementExists xpath="//*[contains(concat(' ', normalize-space(@class), ' '), ' tabler-icon-send ')]" timeout="6m" /> 
					<Wait delay="1s" /> 
					<GetText name="bindex">
						<xpath>//*[@id='chat']/div[2]/div/div/div/div[2]/div[2]/div/div[2]/div/div/div/div/div[2]/div[1]/div[1]/pre/div/pre</xpath> 
						<xpath>//*[@id="chat"]/div[2]/div/div/div/div[2]/div[2]/div/div[2]/div/div/div/div/div[2]/div[1]/div[2]/pre/div/pre</xpath> 
						<xpath>//*[@id="chat"]/div[2]/div/div/div/div[2]/div[2]/div/div[2]/div/div/div/div/div[2]/div[1]/div[2]/p</xpath> 
					</GetText> 
					<Out name="bindex" type="json" /> 
					<Out type="path" level="warn">$var{path}\bindex.json</Out> 
					<Out file="$var{path}\bindex.json" name="bindex" /> 
				</If> 
			</If> 
		</Loop> 
	</Extern> 
</Recipe> 

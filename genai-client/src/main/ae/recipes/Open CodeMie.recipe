<Recipe name="Open CodeMie">
	<Listdir name="webDriverDir"
		path="$var{WorkingDir}/$var{WEBDRIVER_PATH}" />
	<If name="webDriverDir" contains="chromedriver.exe">
		<Else>
			<Remove name="WEBDRIVER_PATH" />
		</Else>
	</If>
	<Loop numbers="60">
		<If name="!CODEMIE PLUGIN PATH" equals="$var{Project_Dir}">
			<Break />
			<Else equals="VPN Required">
				<CheckValue onErrorMsg="You need to run the CodeMie plugin." />
			</Else>
		</If>
		<Wait delay="2s" />
	</Loop>
	<Extern class="Web">
		<ElementNotExists
			xpath="//*[@id='app']/div[3]/div[2]/div/aside/div[1]/div[1]/h2"
			timeout="1s">
			<Page url="https://codemie.lab.epam.com" />
			<Click
				xpath="//*[normalize-space(text())='Sign in with EPAM SSO']"
				timeout="10s" />
			<Click xpath="//*[normalize-space(text())='Tell Me More']"
				exception="ignored" timeout="1s" />
		</ElementNotExists>
		<Page url="https://codemie.lab.epam.com/#/chats" />
		<ElementExists
			xpath="//button[@aria-label='Plugin Assistant' and @data-tooltip-content='Plugin Assistant']"
			timeout="60s" />
	</Extern>
</Recipe> 
